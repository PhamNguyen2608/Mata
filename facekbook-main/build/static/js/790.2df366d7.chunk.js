"use strict";(self.webpackChunkbackbook=self.webpackChunkbackbook||[]).push([[790],{3624:function(e,s,n){n.d(s,{i:function(){return u}});var i=n(1413),r=n(4165),t=n(5861),a=n(3418),c=n(2388),l=n(7956),d=n(8122),o=function(){var e=(0,t.Z)((0,r.Z)().mark((function e(s){var n,i,t,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.id,i=s.type,e.next=3,c.Z.put("".concat("","/api/v1/friends/").concat(i,"/").concat(n),{},{withCredentials:!0});case 3:return t=e.sent,a=t.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}(),u=function(e){return(0,a.D)({mutationKey:"useRelationship",mutationFn:o,onSuccess:function(s){var n,r=null===s||void 0===s||null===(n=s.data)||void 0===n?void 0:n.newNotification;d.E.setQueryData(["getProfile",e],(function(e){if(!e)return e;var n=e;return n.data.friendship=s.data.friendship,e?(0,i.Z)((0,i.Z)({},e),{},{newData:n}):e})),r&&l.W.emit("notification",{notification:r})}})}},9790:function(e,s,n){n.r(s),n.d(s,{default:function(){return R}});var i=n(4165),r=n(5861),t=n(2791),a=n(7689),c=n(1087),l="style_main__+l1ul",d="style_left__1ypPj",o="style_right__ON7F7",u="style_header__P8xPV",h="style_friends_left_header__IXOdG",v="style_menu_item__vjYC9",_="style_rArrow__bBv8p",f="style_active_friends__uqvp2",m="style_req_card__Yw4E1",x="style_friends_right_wrap__F8NNJ",j="style_flex_wrap__TQjT2",N="style_see_link__-ew0u",p="style_photo__he89F",y="style_req_name__ZBe-A",q="style_btns__Ab0HU",g=n(5439),w=n(2388),Z=n(3624),b=n(184);function k(e){var s=e.user,n=e.type,a=e.requestId,l=e.refetch,d=(0,Z.i)(null===s||void 0===s?void 0:s.username),o=d.mutate,u=d.data,h=function(){var e=(0,r.Z)((0,i.Z)().mark((function e(s){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o({id:s,type:"acceptRequest"});case 1:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}(),v=function(){var e=(0,r.Z)((0,i.Z)().mark((function e(s){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o({id:a,type:"cancel"});case 1:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}();return(0,t.useEffect)((function(){"success"===(null===u||void 0===u?void 0:u.status)&&l()}),[u]),(0,b.jsxs)("div",{className:m,children:[(0,b.jsxs)(c.rU,{to:"/profile/".concat(null===s||void 0===s?void 0:s.username),className:p,children:[(0,b.jsx)("img",{src:null===s||void 0===s?void 0:s.photo,alt:""}),(0,b.jsxs)("div",{className:y,children:[null===s||void 0===s?void 0:s.first_name," ",null===s||void 0===s?void 0:s.last_name]})]}),"sent"===n?(0,b.jsx)("div",{className:q,children:(0,b.jsx)("button",{className:"btn_blue",onClick:function(){return v(a)},children:"Cancel Request"})}):"request"===n?(0,b.jsxs)("div",{className:q,children:[(0,b.jsx)("button",{className:"btn_blue",onClick:function(){return h(a)},children:"Confirm"}),(0,b.jsx)("button",{className:"gray_btn",onClick:function(){return v(a)},children:"Delete"})]}):""]})}var F=n(2579);var R=function(){var e=(0,a.UO)().type,s=(0,g.a)({queryKey:["getFriendsPage"],queryFn:function(){var e=(0,r.Z)((0,i.Z)().mark((function e(){var s,n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.Z.get("".concat("","/api/v1/friends/friendsPage"),{withCredentials:!0});case 2:return s=e.sent,n=s.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),refetchOnWindowFocus:!1}),n=s.isLoading,t=s.isFetching,p=s.data,y=s.refetch,q=s.isSuccess,Z=n||t;return(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)("div",{className:l,children:[(0,b.jsx)("div",{}),(0,b.jsxs)("div",{className:d,children:[(0,b.jsxs)("div",{className:u,children:[(0,b.jsx)("h3",{children:"Friends"}),(0,b.jsx)("div",{className:"small_circle",children:(0,b.jsx)("i",{className:"settings_filled_icon"})})]}),(0,b.jsxs)("div",{className:"friends_left_wrap",children:[(0,b.jsxs)(c.rU,{to:"/friends",className:"".concat(v," hover3 ").concat(void 0===e&&f),children:[(0,b.jsx)("div",{className:"small_circle",children:(0,b.jsx)("i",{className:"friends_home_icon "})}),(0,b.jsx)("span",{children:"Home"}),(0,b.jsx)("div",{className:_,children:(0,b.jsx)("i",{className:"right_icon"})})]}),(0,b.jsxs)(c.rU,{to:"/friends/requests",className:"".concat(v," hover3 ").concat("requests"===e&&f),children:[(0,b.jsx)("div",{className:"small_circle",children:(0,b.jsx)("i",{className:"friends_requests_icon"})}),(0,b.jsx)("span",{children:"Friend Requests"}),(0,b.jsx)("div",{className:_,children:(0,b.jsx)("i",{className:"right_icon"})})]}),(0,b.jsxs)(c.rU,{to:"/friends/sent",className:"".concat(v," hover3 ").concat("sent"===e&&f),children:[(0,b.jsx)("div",{className:"small_circle",children:(0,b.jsx)("i",{className:"friends_requests_icon"})}),(0,b.jsx)("span",{children:"Sent Requests"}),(0,b.jsx)("div",{className:_,children:(0,b.jsx)("i",{className:"right_icon"})})]}),(0,b.jsxs)(c.rU,{to:"/friends/all",className:"".concat(v," hover3 ").concat("all"===e&&f),children:[(0,b.jsx)("div",{className:"small_circle",children:(0,b.jsx)("i",{className:"all_friends_icon"})}),(0,b.jsx)("span",{children:"All Friends"}),(0,b.jsx)("div",{className:_,children:(0,b.jsx)("i",{className:"right_icon"})})]}),(0,b.jsxs)("div",{className:"".concat(v," hover3 ").concat("all"===e&&"active_friends"),children:[(0,b.jsx)("div",{className:"small_circle",children:(0,b.jsx)("i",{className:"friends_suggestions_icon"})}),(0,b.jsx)("span",{children:"Suggestions"}),(0,b.jsx)("div",{className:_,children:(0,b.jsx)("i",{className:"right_icon"})})]})]})]}),(0,b.jsxs)("div",{className:o,children:[(void 0===e||"requests"===e)&&(0,b.jsxs)("div",{className:x,children:[(0,b.jsxs)("div",{className:h,children:[(0,b.jsx)("h3",{children:"Friend Requests"}),void 0===e&&(0,b.jsx)(c.rU,{to:"/friends/requests",className:"".concat(N," hover3"),children:"See all"})]}),(0,b.jsxs)("div",{className:j,children:[Z&&(0,b.jsx)(F.Z,{className:m,height:200}),null!==p&&void 0!==p&&p.data.recivedRequests&&(null===p||void 0===p?void 0:p.data.recivedRequests.length)>0?null===p||void 0===p?void 0:p.data.recivedRequests.map((function(e){return(0,b.jsx)(k,{user:e.sender,type:"request",requestId:e._id,refetch:y},e._id)})):q&&!n&&(0,b.jsx)("p",{children:"No friend requests"})]})]}),(void 0===e||"sent"===e)&&(0,b.jsxs)("div",{className:x,children:[(0,b.jsxs)("div",{className:h,children:[(0,b.jsx)("h3",{children:"Sent Requests"}),void 0===e&&(0,b.jsx)(c.rU,{to:"/friends/sent",className:"".concat(N," hover3"),children:"See all"})]}),(0,b.jsxs)("div",{className:j,children:[Z&&(0,b.jsx)(F.Z,{className:m,height:200}),null!==p&&void 0!==p&&p.data.sentRequests&&(null===p||void 0===p?void 0:p.data.sentRequests.length)>0?null===p||void 0===p?void 0:p.data.sentRequests.map((function(e){return(0,b.jsx)(k,{user:e.recipient,type:"sent",requestId:e._id,refetch:y},e._id)})):q&&!n&&(0,b.jsx)("p",{children:"No sent requests"})]})]}),(void 0===e||"all"===e)&&(0,b.jsxs)("div",{className:x,children:[(0,b.jsxs)("div",{className:h,children:[(0,b.jsx)("h3",{children:"Friends"}),void 0===e&&(0,b.jsx)(c.rU,{to:"/friends/all",className:"".concat(N," hover3"),children:"See all"})]}),(0,b.jsxs)("div",{className:j,children:[Z&&(0,b.jsx)(F.Z,{className:m,height:200}),null!==p&&void 0!==p&&p.data.friendLists&&(null===p||void 0===p?void 0:p.data.friendLists.length)>0?null===p||void 0===p?void 0:p.data.friendLists.map((function(e){return(0,b.jsx)(k,{user:e,type:"friends"},null===e||void 0===e?void 0:e._id)})):q&&!n&&(0,b.jsx)("p",{children:"No friends"})]})]})]})]})})}}}]);
//# sourceMappingURL=790.2df366d7.chunk.js.map