{"version":3,"file":"static/js/790.2df366d7.chunk.js","mappings":"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","sources":["hooks/useRealationship.js","webpack://backbook/./src/pages/friends/style.module.css?c99b","pages/friends/FreindCard.jsx","pages/friends/index.jsx"],"sourcesContent":["import { useMutation } from \"@tanstack/react-query\";\nimport axios from \"axios\";\nimport { socket } from \"../routes/IsLoggedIn\";\nimport { queryClient } from \"./../App\";\n\nconst AddFriend = async ({ id, type }) => {\n  const { data } = await axios.put(\n    `${process.env.REACT_APP_BACKEND_URL}/api/v1/friends/${type}/${id}`,\n    {},\n    {\n      withCredentials: true,\n    }\n  );\n  return data;\n};\n\nexport const useRelationship = (usernameID) => {\n  return useMutation({\n    mutationKey: \"useRelationship\",\n    mutationFn: AddFriend,\n    onSuccess: (data) => {\n      const newNotification = data?.data?.newNotification;\n\n      queryClient.setQueryData([\"getProfile\", usernameID], (oldData) => {\n        if (!oldData) return oldData;\n\n        let newData = oldData;\n        newData.data.friendship = data.data.friendship;\n        return oldData\n          ? {\n              ...oldData,\n              newData,\n            }\n          : oldData;\n      });\n      if (newNotification) {\n        socket.emit(\"notification\", { notification: newNotification });\n      }\n    },\n  });\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"main\":\"style_main__+l1ul\",\"left\":\"style_left__1ypPj\",\"right\":\"style_right__ON7F7\",\"header\":\"style_header__P8xPV\",\"friends_left_header\":\"style_friends_left_header__IXOdG\",\"menu_item\":\"style_menu_item__vjYC9\",\"rArrow\":\"style_rArrow__bBv8p\",\"active_friends\":\"style_active_friends__uqvp2\",\"req_card\":\"style_req_card__Yw4E1\",\"friends_right_wrap\":\"style_friends_right_wrap__F8NNJ\",\"flex_wrap\":\"style_flex_wrap__TQjT2\",\"see_link\":\"style_see_link__-ew0u\",\"photo\":\"style_photo__he89F\",\"req_name\":\"style_req_name__ZBe-A\",\"btns\":\"style_btns__Ab0HU\"};","import { Link } from \"react-router-dom\";\nimport { useEffect } from \"react\";\nimport { useRelationship } from \"../../hooks/useRealationship\";\nimport classes from \"./style.module.css\";\n\nexport default function FriendCard({ user, type, requestId, refetch }) {\n  const { mutate, data } = useRelationship(user?.username);\n\n  const acceptRequest = async (requestId) => {\n    mutate({ id: requestId, type: \"acceptRequest\" });\n  };\n\n  const cancelRequestHandler = async (userId) => {\n    mutate({ id: requestId, type: \"cancel\" });\n  };\n\n  useEffect(() => {\n    if (data?.status === \"success\") {\n      refetch();\n    }\n  }, [data]);\n\n  return (\n    <div className={classes.req_card}>\n      <Link to={`/profile/${user?.username}`} className={classes.photo}>\n        <img src={user?.photo} alt=\"\" />\n        <div className={classes.req_name}>\n          {user?.first_name} {user?.last_name}\n        </div>\n      </Link>\n      {type === \"sent\" ? (\n        <div className={classes.btns}>\n          <button\n            className=\"btn_blue\"\n            onClick={() => cancelRequestHandler(requestId)}\n          >\n            Cancel Request\n          </button>\n        </div>\n      ) : type === \"request\" ? (\n        <div className={classes.btns}>\n          <button className=\"btn_blue\" onClick={() => acceptRequest(requestId)}>\n            Confirm\n          </button>\n          <button\n            className=\"gray_btn\"\n            onClick={() => cancelRequestHandler(requestId)}\n          >\n            Delete\n          </button>\n        </div>\n      ) : (\n        \"\"\n      )}\n    </div>\n  );\n}\n","import React from \"react\";\nimport { Link, useParams } from \"react-router-dom\";\nimport classes from \"./style.module.css\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport axios from \"axios\";\nimport FriendCard from \"./FreindCard\";\nimport Skeleton from \"react-loading-skeleton\";\n\nfunction FriendsPage() {\n  const { type } = useParams();\n\n  const { isLoading, isFetching, data, refetch, isSuccess } = useQuery({\n    queryKey: [\"getFriendsPage\"],\n    queryFn: async () => {\n      const { data } = await axios.get(\n        `${process.env.REACT_APP_BACKEND_URL}/api/v1/friends/friendsPage`,\n        {\n          withCredentials: true,\n        }\n      );\n      return data;\n    },\n    refetchOnWindowFocus: false,\n  });\n\n  const friendsSkelton = isLoading || isFetching;\n\n  return (\n    <>\n      <div className={classes.main}>\n        <div></div>\n        <div className={classes.left}>\n          <div className={classes.header}>\n            <h3>Friends</h3>\n            <div className=\"small_circle\">\n              <i className=\"settings_filled_icon\"></i>\n            </div>\n          </div>\n          <div className=\"friends_left_wrap\">\n            <Link\n              to=\"/friends\"\n              className={`${classes.menu_item} hover3 ${\n                type === undefined && classes.active_friends\n              }`}\n            >\n              <div className=\"small_circle\">\n                <i className=\"friends_home_icon \"></i>\n              </div>\n              <span>Home</span>\n              <div className={classes.rArrow}>\n                <i className=\"right_icon\"></i>\n              </div>\n            </Link>\n            <Link\n              to=\"/friends/requests\"\n              className={`${classes.menu_item} hover3 ${\n                type === \"requests\" && classes.active_friends\n              }`}\n            >\n              <div className=\"small_circle\">\n                <i className=\"friends_requests_icon\"></i>\n              </div>\n              <span>Friend Requests</span>\n              <div className={classes.rArrow}>\n                <i className=\"right_icon\"></i>\n              </div>\n            </Link>\n            <Link\n              to=\"/friends/sent\"\n              className={`${classes.menu_item} hover3 ${\n                type === \"sent\" && classes.active_friends\n              }`}\n            >\n              <div className=\"small_circle\">\n                <i className=\"friends_requests_icon\"></i>\n              </div>\n              <span>Sent Requests</span>\n              <div className={classes.rArrow}>\n                <i className=\"right_icon\"></i>\n              </div>\n            </Link>\n            <Link\n              to=\"/friends/all\"\n              className={`${classes.menu_item} hover3 ${\n                type === \"all\" && classes.active_friends\n              }`}\n            >\n              <div className=\"small_circle\">\n                <i className=\"all_friends_icon\"></i>\n              </div>\n              <span>All Friends</span>\n              <div className={classes.rArrow}>\n                <i className=\"right_icon\"></i>\n              </div>\n            </Link>\n            <div\n              className={`${classes.menu_item} hover3 ${\n                type === \"all\" && \"active_friends\"\n              }`}\n            >\n              <div className=\"small_circle\">\n                <i className=\"friends_suggestions_icon\"></i>\n              </div>\n              <span>Suggestions</span>\n              <div className={classes.rArrow}>\n                <i className=\"right_icon\"></i>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div className={classes.right}>\n          {(type === undefined || type === \"requests\") && (\n            <div className={classes.friends_right_wrap}>\n              <div className={classes.friends_left_header}>\n                <h3>Friend Requests</h3>\n                {type === undefined && (\n                  <Link\n                    to=\"/friends/requests\"\n                    className={`${classes.see_link} hover3`}\n                  >\n                    See all\n                  </Link>\n                )}\n              </div>\n              <div className={classes.flex_wrap}>\n                {friendsSkelton && (\n                  <Skeleton className={classes.req_card} height={200} />\n                )}\n                {data?.data.recivedRequests &&\n                data?.data.recivedRequests.length > 0\n                  ? data?.data.recivedRequests.map((request) => (\n                      <FriendCard\n                        user={request.sender}\n                        key={request._id}\n                        type=\"request\"\n                        requestId={request._id}\n                        refetch={refetch}\n                      />\n                    ))\n                  : isSuccess && !isLoading && <p>No friend requests</p>}\n              </div>\n            </div>\n          )}\n          {(type === undefined || type === \"sent\") && (\n            <div className={classes.friends_right_wrap}>\n              <div className={classes.friends_left_header}>\n                <h3>Sent Requests</h3>\n                {type === undefined && (\n                  <Link\n                    to=\"/friends/sent\"\n                    className={`${classes.see_link} hover3`}\n                  >\n                    See all\n                  </Link>\n                )}\n              </div>\n              <div className={classes.flex_wrap}>\n                {friendsSkelton && (\n                  <Skeleton className={classes.req_card} height={200} />\n                )}\n                {data?.data.sentRequests && data?.data.sentRequests.length > 0\n                  ? data?.data.sentRequests.map((request) => (\n                      <FriendCard\n                        user={request.recipient}\n                        key={request._id}\n                        type=\"sent\"\n                        requestId={request._id}\n                        refetch={refetch}\n                      />\n                    ))\n                  : isSuccess && !isLoading && <p>No sent requests</p>}\n              </div>\n            </div>\n          )}\n          {(type === undefined || type === \"all\") && (\n            <div className={classes.friends_right_wrap}>\n              <div className={classes.friends_left_header}>\n                <h3>Friends</h3>\n                {type === undefined && (\n                  <Link\n                    to=\"/friends/all\"\n                    className={`${classes.see_link} hover3`}\n                  >\n                    See all\n                  </Link>\n                )}\n              </div>\n              <div className={classes.flex_wrap}>\n                {friendsSkelton && (\n                  <Skeleton className={classes.req_card} height={200} />\n                )}\n                {data?.data.friendLists && data?.data.friendLists.length > 0\n                  ? data?.data.friendLists.map((user) => (\n                      <FriendCard user={user} key={user?._id} type=\"friends\" />\n                    ))\n                  : isSuccess && !isLoading && <p>No friends</p>}\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default FriendsPage;\n"],"names":["AddFriend","id","type","axios","process","withCredentials","data","useRelationship","usernameID","useMutation","mutationKey","mutationFn","onSuccess","newNotification","queryClient","oldData","newData","friendship","socket","notification","FriendCard","user","requestId","refetch","username","mutate","acceptRequest","cancelRequestHandler","userId","useEffect","status","className","classes","to","src","photo","alt","first_name","last_name","onClick","useParams","useQuery","queryKey","queryFn","refetchOnWindowFocus","isLoading","isFetching","isSuccess","friendsSkelton","undefined","height","recivedRequests","length","map","request","sender","_id","sentRequests","recipient","friendLists"],"sourceRoot":""}