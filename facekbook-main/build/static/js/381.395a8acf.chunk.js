"use strict";(self.webpackChunkbackbook=self.webpackChunkbackbook||[]).push([[381],{5960:function(e,t,a){var r,n,s=a(1413),i=a(885),o=a(168),c=a(2791),l=a(6444),d=a(8272),u=a(2483),m=a(184),h=l.ZP.div(r||(r=(0,o.Z)(['\n  width: 0.6rem;\n  height: 0.6rem;\n  &::before {\n    content: "";\n    background: #b94a48;\n    width: 0.6rem;\n    height: 0.6rem;\n    transform: translate(-50%, -50%) rotate(45deg);\n    position: absolute;\n    top: 0;\n    left: 0;\n  }\n']))),p=l.ZP.div(n||(n=(0,o.Z)(['\n  background: #b94a48;\n  border-radius: 5px;\n  color: white;\n  padding: 0.8rem;\n  font-weight: 300;\n  font-size: 13px;\n  z-index: 99;\n  max-width: 318px;\n\n  &[data-popper-placement^="right"] {\n    ',' {\n      left: 0px;\n    }\n  }\n\n  &[data-popper-placement^="left"] {\n    ',' {\n      right: -0.6rem;\n    }\n  }\n\n  &[data-popper-placement^="top"] {\n    ',' {\n      bottom: -0.6rem;\n    }\n  }\n\n  &[data-popper-placement^="bottom"] {\n    '," {\n      top: 0px;\n    }\n  }\n"])),h,h,h,h);t.Z=function(e){var t=e.children,a=e.trigger,r=e.placement,n=e.offsetNum,o=(0,c.useState)(null),l=(0,i.Z)(o,2),g=l[0],v=l[1],_=(0,c.useState)(null),x=(0,i.Z)(_,2),f=x[0],b=x[1],y=(0,d.D)(a,g,{placement:r,modifiers:[{name:"arrow",options:{element:f}},{name:"offset",options:{offset:[0,parseInt(n||8)]}}]}),j=y.styles,k=y.attributes;return(0,m.jsx)(u.Z,{children:(0,m.jsxs)(p,(0,s.Z)((0,s.Z)({ref:v,style:j.popper},k.popper),{},{children:[t,(0,m.jsx)(h,{ref:b,style:j.arrow})]}))})}},1626:function(e,t,a){a.d(t,{Z:function(){return p}});var r=a(1413),n=a(885),s=a(4925),i=a(2791),o="input_wrap__r5hNU",c="input_error__5KxCg",l=a(5705),d=a(4805),u=a(5960),m=a(184),h=["placeholder","type","disabled","className"];var p=function(e){var t=e.placeholder,a=e.type,p=e.disabled,g=e.className,v=(0,s.Z)(e,h),_=(0,l.U$)(v),x=(0,n.Z)(_,2),f=x[0],b=x[1],y=(0,i.useState)(null),j=(0,n.Z)(y,2),k=j[0],N=j[1],C=(0,i.useState)(!1),w=(0,n.Z)(C,2),Z=w[0],S=w[1],I=(0,d.useMediaQuery)({query:"(min-width: 850px)"});return(0,m.jsxs)("div",{className:"".concat(o," ").concat(g),ref:N,children:[b.touched&&b.error&&Z&&(0,m.jsx)(u.Z,{trigger:k,placement:I?"left":"top-start",offsetNum:I?15:8,children:(0,m.jsx)(l.Bc,{name:f.name})}),(0,m.jsx)("input",(0,r.Z)((0,r.Z)({className:b.touched&&b.error?c:"",type:a,name:f.name,placeholder:t,disabled:p,autoComplete:"on"},f),{},{onFocusCapture:function(){return S(!0)},onBlurCapture:function(e){S(!1)}})),b.touched&&b.error&&(0,m.jsx)("i",{className:"error_icon",style:{top:"15px"}})]})}},9747:function(e,t,a){a.d(t,{C:function(){return c}});var r=a(4165),n=a(5861),s=a(3418),i=a(2388),o=function(){var e=(0,n.Z)((0,r.Z)().mark((function e(t){var a,n,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.user,e.next=3,i.Z.post("".concat("","/api/v1/chats/create/private"),{userId:a},{withCredentials:!0});case 3:return n=e.sent,s=n.data,e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=function(){return(0,s.D)({mutationKey:"useGetChat",mutationFn:o})}},2381:function(e,t,a){a.r(t),a.d(t,{default:function(){return Tt}});var r=a(885),n=a(1413),s=a(2791),i="messages_main__Z4rve",o="messages_middle__yBRJ+",c="messages_left__V+pBZ",l="messages_right__pg+z7",d="messages_home_desk__jngcl",u="messages_left_header__PdEdZ",m="messages_left_header_top__LH50+",h="messages_circle_icon__nNN2m",p="messages_search__P6Ejm",g="messages_input__x+L7s",v="messages_chats__3Q1FY",_="messages_chat__B4ZLd",x="messages_chat_active__bWHFU",f="messages_chat_img__Mhf+9",b="messages_chat_img2__iIYO+",y="messages_green_dot__4updZ",j="messages_chat_info__euVqT",k="messages_menu__uE91A",N="messages_menu_wrap__SMXnz",C="messages_menu_text__Qa707",w="messages_menu_col__zr5Hh",Z="messages_online_users_wrap__fm51I",S="messages_online_users__KTUoC",I="messages_online_user__1maxM",E="messages_img_con__vDXWZ",M="messages_middle_header__AqwX7",A="messages_messages__qzG-q",V="messages_send__MFmfe",D="messages_send_message_wrap__lfv18",G="messages_send_message__K2HIC",T="messages_send_message_button__Nt4fC",P="messages_message__5tWoO",R="messages_msg_date__Fb2RI",F="messages_msg_space__JijSa",O="messages_message_user__feNwM",B="messages_message_content__nbMq2",U="messages_m_c_first_radius__MZJzl",L="messages_m_c_last_radius__087rK",K="messages_message_content_user__SKKyV",W="messages_m_c_u_first_radius__pW6dN",z="messages_m_c_u_last_radius__eHG0u",Y="messages_single_radius__LB+EC",$="messages_info_message__0158D",H="messages_meesage_user__VgLCw",q="messages_seen_status__QgqRW",J="messages_seen_status_s__k8OZk",Q="messages_right_header__c2a1g",X="messages_pfp__c+Pmw",ee="messages_profile_link__OlwWa",te="messages_chat_infos__+ajSI",ae="messages_group_member__v37Hy",re="messages_group_member_info__mtfpU",ne="messages_group_member_info2__gUids",se="messages_remoe_member__nJZux",ie="messages_chat_info_item__cHc97",oe="messages_theme_circle__M0VuM",ce="messages_icon__+OUi-",le="messages_main_info__1WlaX",de="messages_rotate90__uyBRs",ue=a(7689),me=a(4165),he=a(5861),pe=a(8561),ge=a(7858),ve=a(2388),_e=a(7956),xe=a(6431),fe=a.n(xe),be=a(379),ye=JSON.parse('{"v":"5.5.2","fr":60,"ip":0,"op":104,"w":84,"h":40,"nm":"Typing-Indicator","ddd":0,"assets":[],"layers":[{"ddd":0,"ind":1,"ty":4,"nm":"Oval 3","sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.643],"y":[1]},"o":{"x":[1],"y":[0]},"t":18,"s":[35],"e":[100]},{"i":{"x":[0.099],"y":[1]},"o":{"x":[0.129],"y":[0]},"t":33,"s":[100],"e":[35]},{"i":{"x":[0.833],"y":[1]},"o":{"x":[0.167],"y":[0]},"t":65,"s":[35],"e":[35]},{"t":71}],"ix":11,"x":"var $bm_rt;\\n$bm_rt = loopOut(\'cycle\', 0);"},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[61,20,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[1,1,0.333],"y":[0,0,0]},"t":18,"s":[100,100,100],"e":[140,140,100]},{"i":{"x":[0.032,0.032,0.667],"y":[1,1,1]},"o":{"x":[0.217,0.217,0.333],"y":[0,0,0]},"t":33,"s":[140,140,100],"e":[100,100,100]},{"i":{"x":[0.833,0.833,0.833],"y":[1,1,1]},"o":{"x":[0.167,0.167,0.167],"y":[0,0,0]},"t":65,"s":[100,100,100],"e":[100,100,100]},{"t":71}],"ix":6,"x":"var $bm_rt;\\n$bm_rt = loopOut(\'cycle\', 0);"}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[12,12],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"fl","c":{"a":0,"k":[0.847000002861,0.847000002861,0.847000002861,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Oval 3","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":3600,"st":0,"bm":0},{"ddd":0,"ind":2,"ty":4,"nm":"Oval 2","sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[1],"y":[0]},"t":9,"s":[35],"e":[98]},{"i":{"x":[0.023],"y":[1]},"o":{"x":[0.179],"y":[0]},"t":24,"s":[98],"e":[35]},{"i":{"x":[0.833],"y":[1]},"o":{"x":[0.167],"y":[0]},"t":56,"s":[35],"e":[35]},{"t":62}],"ix":11,"x":"var $bm_rt;\\n$bm_rt = loopOut(\'cycle\', 0);"},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[41,20,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.654,0.654,0.667],"y":[1,1,1]},"o":{"x":[1,1,0.333],"y":[0,0,0]},"t":9,"s":[100,100,100],"e":[140,140,100]},{"i":{"x":[0.11,0.11,0.667],"y":[1,1,1]},"o":{"x":[0.205,0.205,0.333],"y":[0,0,0]},"t":24,"s":[140,140,100],"e":[100,100,100]},{"i":{"x":[0.833,0.833,0.833],"y":[1,1,1]},"o":{"x":[0.167,0.167,0.167],"y":[0,0,0]},"t":56,"s":[100,100,100],"e":[100,100,100]},{"t":62}],"ix":6,"x":"var $bm_rt;\\n$bm_rt = loopOut(\'cycle\', 0);"}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[12,12],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"fl","c":{"a":0,"k":[0.847000002861,0.847000002861,0.847000002861,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Oval 2","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":3600,"st":0,"bm":0},{"ddd":0,"ind":3,"ty":4,"nm":"Oval 1","sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[1],"y":[0]},"t":0,"s":[35],"e":[100]},{"i":{"x":[0.067],"y":[1]},"o":{"x":[0.125],"y":[0]},"t":15,"s":[100],"e":[35]},{"i":{"x":[0.833],"y":[1]},"o":{"x":[0.167],"y":[0]},"t":47,"s":[35],"e":[35]},{"t":53}],"ix":11,"x":"var $bm_rt;\\n$bm_rt = loopOut(\'cycle\', 0);"},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[21,20,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.673,0.673,0.667],"y":[1,1,1]},"o":{"x":[1,1,0.333],"y":[0,0,0]},"t":0,"s":[100,100,100],"e":[140,140,100]},{"i":{"x":[0.049,0.049,0.667],"y":[1,1,1]},"o":{"x":[0.198,0.198,0.333],"y":[0,0,0]},"t":15,"s":[140,140,100],"e":[100,100,100]},{"i":{"x":[0.833,0.833,0.833],"y":[1,1,1]},"o":{"x":[0.167,0.167,0.167],"y":[0,0,0]},"t":47,"s":[100,100,100],"e":[100,100,100]},{"t":53}],"ix":6,"x":"var $bm_rt;\\n$bm_rt = loopOut(\'cycle\', 0);"}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[12,12],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"fl","c":{"a":0,"k":[0.847000002861,0.847000002861,0.847000002861,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Oval 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":3600,"st":0,"bm":0},{"ddd":0,"ind":4,"ty":4,"nm":"BG","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[42,20,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0]],"v":[[-42,-20],[42,-20],[42,20],[-42,20]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"rd","nm":"Round Corners 1","r":{"a":0,"k":20,"ix":1},"ix":2,"mn":"ADBE Vector Filter - RC","hd":false},{"ty":"fl","c":{"a":0,"k":[0.96078401804,0.96078401804,0.96078401804,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"BG","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":3600,"st":0,"bm":0}],"markers":[]}'),je=a(9348),ke=a(3418),Ne=a(9434),Ce=a(8059),we=a(535),Ze=function(){var e=(0,he.Z)((0,me.Z)().mark((function e(t){var a,r,n;return(0,me.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.messageId,e.next=3,ve.Z.put("".concat("","/api/v1/messages/").concat(a,"/seen"),{},{withCredentials:!0});case 3:return r=e.sent,n=r.data,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Se=a(184);var Ie=function(e){var t,a,r,n=e.chat,s=e.user;return(0,Se.jsx)(Se.Fragment,{children:(null===n||void 0===n||null===(t=n.latestMessage)||void 0===t?void 0:t.sender._id)===s._id?"seen"===(null===n||void 0===n||null===(a=n.latestMessage)||void 0===a?void 0:a.seen)?(0,Se.jsx)("img",{src:null===n||void 0===n?void 0:n.photo,alt:"",className:J}):(0,Se.jsx)("span",{className:J,children:(0,Se.jsx)(pe.s3,{})}):"unseen"===(null===n||void 0===n||null===(r=n.latestMessage)||void 0===r?void 0:r.seen)?(0,Se.jsx)("span",{className:q}):""})};function Ee(e,t){return e.sender._id!==t._id}function Me(e,t,a){var r,n;return e.sender._id!==(null===(r=t[a-1])||void 0===r?void 0:r.sender._id)&&e.sender._id===(null===(n=t[a+1])||void 0===n?void 0:n.sender._id)}function Ae(e,t,a){var r,n;return e.sender._id!==(null===(r=t[a+1])||void 0===r?void 0:r.sender._id)&&e.sender._id===(null===(n=t[a-1])||void 0===n?void 0:n.sender._id)}function Ve(e,t,a){var r,n;return e.sender._id!==(null===(r=t[a+1])||void 0===r?void 0:r.sender._id)&&e.sender._id!==(null===(n=t[a-1])||void 0===n?void 0:n.sender._id)}var De=a(1087),Ge="chatInfo_main__Z8xF0",Te="chatInfo_rotate360__78xHm",Pe="chatInfo_content__0cDBu",Re="chatInfo_icon__rKwj7";var Fe=function(e){var t=e.title,a=e.children,n=(0,s.useState)(!1),i=(0,r.Z)(n,2),o=i[0],c=i[1];return(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsxs)("div",{className:"".concat(Ge," hover2"),onClick:function(){c((function(e){return!e}))},children:[(0,Se.jsx)("span",{children:t}),(0,Se.jsx)("div",{className:"".concat(Re," ").concat(o?Te:""),children:(0,Se.jsx)(pe.$T,{})})]}),o&&(0,Se.jsx)("div",{className:Pe,children:a})]})},Oe=a(2982),Be=a(5705),Ue=a(9571),Le=a(1656),Ke=a(1626),We=a(3466),ze={wrap:"CreateGroup_wrap__8nRve",card:"CreateGroup_card__bBanH",header:"CreateGroup_header__aR6Sk",exit:"CreateGroup_exit__IMJJ-",content:"CreateGroup_content__gAfXx",input_wrap:"CreateGroup_input_wrap__XGuxP",error:"CreateGroup_error__ooU9J",label:"CreateGroup_label__h8MpD",members:"CreateGroup_members__8X7WM",member:"CreateGroup_member__eg4Qb"},Ye={search_area:"SearchUser_search_area__+FI7C",search_wrap:"SearchUser_search_wrap__ifn2S",search:"SearchUser_search__FjMyc",input:"SearchUser_input__1bj6C",search_history:"SearchUser_search_history__vb4xt",search_history_header:"SearchUser_search_history_header__YOaMn",search_results:"SearchUser_search_results__wCN0P",search_result:"SearchUser_search_result__nOS9p",search_result_img:"SearchUser_search_result_img__6e6uw",search_item:"SearchUser_search_item__v4as6",search_user_item:"SearchUser_search_user_item__iDzch"},$e=a(1724),He=a(4117),qe=a(5218),Je=a(8122),Qe=function(){var e=(0,he.Z)((0,me.Z)().mark((function e(t){var a,r,n,s;return(0,me.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.users,r=t.chatName,e.next=3,ve.Z.post("".concat("","/api/v1/chats/create/group"),{users:a,chatName:r},{withCredentials:!0});case 3:return n=e.sent,s=n.data,e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Xe=function(){return(0,ke.D)({mutationKey:"useCreateChatGroup",mutationFn:Qe,onSuccess:function(e){var t,a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.chat;Je.E.setQueryData(["getChats"],(function(e){if(!e)return e;var t=e;return t.data.chats=[a].concat((0,Oe.Z)(t.data.chats)),(0,n.Z)((0,n.Z)({},e),{},{newData:t})}))}})},et=function(e){var t=(0,Ne.v9)((function(e){return(0,n.Z)({},e.user.userinfo)}));return(0,ke.D)({mutationKey:"useSendMessage",mutationFn:function(){var e=(0,he.Z)((0,me.Z)().mark((function e(a){var r,n,s,i,o;return(0,me.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.content,n=a.chatId,s=a.type,(0,we.S9)({_id:Math.floor(1e11*Math.random()+1),content:r,chat:n,type:s,sender:t}),e.next=4,ve.Z.put("".concat("","/api/v1/messages/").concat(n,"/send"),{content:r,type:s},{withCredentials:!0});case 4:return i=e.sent,o=i.data,e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e){var t,a;qe.Am.error(null===e||void 0===e||null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)},onSuccess:function(t){var a,r=null===t||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message;_e.W.emit("new_message",{message:r,chat:e})}})},tt=function(){var e=(0,he.Z)((0,me.Z)().mark((function e(t){var a,r,n,s;return(0,me.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.chatId,r=t.userId,e.next=3,ve.Z.put("".concat("","/api/v1/chats/group/add"),{chatId:a,userId:r},{withCredentials:!0});case 3:return n=e.sent,s=n.data,e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),at=function(e){var t=et(e).mutate;return(0,ke.D)({mutationKey:"useAddMember",mutationFn:tt,onSuccess:function(a){var r,s=null===a||void 0===a||null===(r=a.data)||void 0===r?void 0:r.user;Je.E.setQueryData(["getMessages",e._id],(function(e){if(!e)return e;var t=e;return t.pages[0].data.chat.users=[s].concat((0,Oe.Z)(t.pages[0].data.chat.users)),(0,n.Z)((0,n.Z)({},e),{},{newData:t})})),t({content:"".concat(s.first_name," ").concat(s.last_name," Added to this group"),type:"info",chatId:e._id})}})},rt=function(){var e=(0,he.Z)((0,me.Z)().mark((function e(t){var a,r,n,s;return(0,me.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.chatId,r=t.chatName,e.next=3,ve.Z.put("".concat("","/api/v1/chats/group/rename"),{chatId:a,chatName:r},{withCredentials:!0});case 3:return n=e.sent,s=n.data,e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),nt=function(e){var t=et(e).mutate;return(0,ke.D)({mutationKey:"useRenameGroup",mutationFn:rt,onSuccess:function(a){var r,n,s=null===a||void 0===a||null===(r=a.data)||void 0===r?void 0:r.chatName,i=null===a||void 0===a||null===(n=a.data)||void 0===n?void 0:n.user;(0,we.Vp)(s,e._id),t({content:"Group name changed to ".concat(s),type:"info",chatId:e._id}),_e.W.emit("customize_chat",{userId:i,type:"name",content:s,chat:e})}})};a(2483);var st=function(e){var t=e.setShowCreateGroup,a=e.showCreateGroup,n=e.type,i=e.chat,o=(0,ue.s0)(),c={chatName:i?i.chatName:""},l=$e.Ry({chatName:"create"===n||"rename"===n?$e.Z_().required("Group name is required.").min(3).max(40):$e.Z_()}),d=(0,s.useRef)(null),u=(0,s.useRef)();(0,Ue.Z)(u,a,(function(){t(!1)}));var m=c.chatName,h=(0,s.useState)([]),p=(0,r.Z)(h,2),g=p[0],v=p[1],_=(0,s.useState)(""),x=(0,r.Z)(_,2),f=x[0],b=x[1],y=(0,s.useState)(f),j=(0,r.Z)(y,2),k=j[0],N=j[1],C=(0,He.R)(),w=C.mutate,Z=C.data,S=C.isLoading,I=C.isSuccess,E=Xe(),M=E.mutate,A=E.data,V=E.isLoading,D=E.isSuccess,G=E.isError,T=E.error,P=at(i),R=P.mutate,F=P.data,O=P.isLoading,B=P.isSuccess,U=P.isError,L=P.error,K=nt(i),W=K.mutate,z=K.data,Y=K.isLoading,$=K.isSuccess,H=K.isError,q=K.error,J=V||O||Y,Q=G||U||H,X=T||L||q,ee=D||B||$,te=function(){var e=(0,he.Z)((0,me.Z)().mark((function e(t){var a;return(0,me.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=g.map((function(e){return e._id})),"create"===n?M({chatName:t.chatName,users:a}):"add"===n?R({userId:a[0],chatId:i._id}):"rename"===n&&W({chatName:t.chatName,chatId:i._id});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,s.useEffect)((function(){var e=setTimeout((function(){return b(k)}),1e3);return function(){return clearTimeout(e)}}),[k]),(0,s.useEffect)((function(){f.trim().length>0&&w({term:f})}),[f]),(0,s.useEffect)((function(){"create"===n&&"success"===(null===A||void 0===A?void 0:A.status)?(o("/messages/".concat(A.data.chat._id)),t(!1)):("add"===n&&"success"===(null===F||void 0===F?void 0:F.status)||"rename"===n&&"success"===(null===z||void 0===z?void 0:z.status))&&t(!1)}),[ee]),(0,s.useEffect)((function(){var e,t;Q&&qe.Am.error(null===X||void 0===X||null===(e=X.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)}),[Q]),(0,Se.jsx)("div",{className:"".concat(ze.wrap," blur"),children:(0,Se.jsxs)(We.Z,{className:ze.card,innerRef:u,children:[(0,Se.jsxs)("div",{className:ze.header,children:[(0,Se.jsx)("span",{children:"create"===n?"Create Group":"add"===n?"Add member":"rename"===n?"Chane Group Name":""}),(0,Se.jsx)("div",{onClick:function(){t(!1)},className:"".concat(ze.exit," small_circle"),children:(0,Se.jsx)("i",{className:"exit_icon"})})]}),(0,Se.jsx)("div",{className:ze.content,children:(0,Se.jsx)(Be.J9,{enableReinitialize:!0,validationSchema:l,initialValues:{chatName:m},onSubmit:function(e){g.length<2&&"create"===n?qe.Am.error("Please add at least 2 members to group"):g.length<1&&"add"===n?qe.Am.error("Please select member first"):te(e)},children:function(e){return(0,Se.jsxs)(Be.l0,{className:ze.form,noValidate:!0,children:[(0,Se.jsxs)(Le.Z,{loading:J,children:[("create"===n||"rename"===n)&&(0,Se.jsx)(Ke.Z,{type:"text",name:"chatName",placeholder:"Group Name",disabled:J}),("create"===n||"add"===n)&&(0,Se.jsx)("p",{className:ze.label,children:"Add members to group"}),g.length>0&&(0,Se.jsx)("div",{className:ze.members,children:g.map((function(e){return(0,Se.jsxs)("div",{className:ze.member,children:[(0,Se.jsx)("img",{src:e.photo,alt:""}),"".concat(e.first_name," ").concat(e.last_name),(0,Se.jsx)("i",{style:{transform:"scale(.8)",cursor:"pointer"},onClick:function(){v((function(t){return t.filter((function(t){return t._id!==e._id}))}))},className:"exit_icon"})]},e._id)}))}),("create"===n||"add"===n&&g.length<1)&&(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)("div",{className:"".concat(ze.input_wrap),children:(0,Se.jsx)("input",{type:"text",placeholder:"search for members to add",ref:d,onChange:function(e){return N(e.target.value)},value:k})}),(0,Se.jsx)("div",{className:"scrollbar",style:{maxHeight:"150px",marginBottom:"10px"},children:(0,Se.jsx)("div",{className:"".concat(Ye.search_results," scrollbar"),children:!S&&I&&(null===Z||void 0===Z?void 0:Z.data.results.length)>0&&f.trim().length>0?null===Z||void 0===Z?void 0:Z.data.results.map((function(e){return(0,Se.jsx)("div",{to:"/messages/".concat(e._id),className:"".concat(Ye.search_item," hover2"),onClick:function(){var t;t=e,g.some((function(e){return Object.entries(t).every((function(t){var a=(0,r.Z)(t,2),n=a[0];return a[1]===e[n]}))}))||v((function(t){return[].concat((0,Oe.Z)(t),[e])}))},children:(0,Se.jsxs)("div",{className:"".concat(Ye.search_result),children:[(0,Se.jsx)("div",{children:(0,Se.jsx)("img",{className:Ye.search_result_img,src:e.photo,alt:""})}),(0,Se.jsxs)("span",{children:[e.first_name," ",e.last_name]})]})},e._id)})):f?(0,Se.jsx)("p",{style:{padding:"10px"},children:"No Search Results"}):""})})]})]}),(0,Se.jsx)("button",{type:"submit",className:"btn_blue",disabled:J,children:"create"===n?"Create":"add"===n?"Add":"rename"===n?"Change":""})]})}})})]})})},it=function(){var e=(0,he.Z)((0,me.Z)().mark((function e(t){var a,r,n,s;return(0,me.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.chatId,r=t.userId,e.next=3,ve.Z.put("".concat("","/api/v1/chats/group/remove"),{chatId:a,userId:r},{withCredentials:!0});case 3:return n=e.sent,s=n.data,e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ot=function(e){var t=et(e).mutate;return(0,ke.D)({mutationKey:"useRemoveMember",mutationFn:it,onSuccess:function(a){var r,s,i=null===a||void 0===a||null===(r=a.data)||void 0===r?void 0:r.user,o=null===a||void 0===a||null===(s=a.data)||void 0===s?void 0:s.deletedUser;Je.E.setQueryData(["getMessages",e._id],(function(e){if(!e)return e;var t=e;return t.pages[0].data.chat.users=t.pages[0].data.chat.users.filter((function(e){return e._id!==i})),(0,n.Z)((0,n.Z)({},e),{},{newData:t})})),t({content:"".concat(o.first_name," ").concat(o.last_name," Removed from this group"),type:"info",chatId:e._id})}})},ct=a(2579),lt=[{id:1,type:"gradient",data:"radial-gradient(circle at center 75%, rgb(69, 51, 255) 0%, rgb(87, 74, 224) 50%, rgb(108, 100, 190) 100%)",color:"rgb(87, 77, 193)",topColor:"rgb(69, 51, 255)",downColor:"rgb(108, 100, 190)",name:"Black History Month \ud83d\udda4"},{id:2,type:"gradient",data:"radial-gradient(circle at center 75%, rgb(246, 149, 0) 0%, rgb(218, 0, 80) 100%)",color:"rgb(232, 75, 40)",topColor:"rgb(246, 149, 0)",downColor:"rgb(218, 0, 80)",name:"Lunar New Year \ud83e\udde7"},{id:3,type:"gradient",data:"radial-gradient(circle at center 75%, rgb(140, 179, 255) 0%, rgb(140, 179, 255) 100%)",color:"rgb(102, 169, 255)",topColor:"rgb(140, 179, 255)",downColor:"rgb(140, 179, 255)",name:"Chill \ud83e\udd76"},{id:4,type:"gradient",data:"radial-gradient(circle at center 75%, rgb(176, 158, 183) 0%, rgb(160, 123, 174) 50%, rgb(153, 122, 165) 100%)",color:"rgb(157, 123, 171)",topColor:"rgb(176, 158, 183)",downColor:"rgb(153, 122, 165)",name:"Taylor Swift \ud83d\udd70"},{id:5,type:"gradient",data:"radial-gradient(circle at center 75%, rgb(247, 215, 0) 0%, rgb(247, 215, 0) 50%, rgb(247, 215, 0) 100%)",color:"rgb(247, 215, 0)",topColor:"rgb(247, 215, 0)",downColor:"rgb(247, 215, 0)",name:"Cyberpunk 2077 \ud83e\uddbe"},{id:6,type:"gradient",data:"radial-gradient(circle at center 75%, rgb(237, 159, 154) 0%, rgb(237, 159, 154) 50%, rgb(237, 159, 154) 100%)",color:"rgb(110, 91, 4)",topColor:"rgb(237, 159, 154)",downColor:"rgb(237, 159, 154)",name:"Support \ud83d\udc9b"},{id:7,type:"gradient",data:"radial-gradient(circle at center 75%, rgb(47, 169, 228) 0%, rgb(100, 143, 235) 50%, rgb(155, 115, 242) 100%)",color:"rgb(11, 0, 133)",topColor:"rgb(47, 169, 228)",downColor:"rgb(155, 115, 242)",name:"Music \ud83d\udd08"},{id:8,type:"gradient",data:"radial-gradient(circle at center 75%, rgb(130, 2, 2) 0%, rgb(152, 12, 12) 50%, rgb(163, 17, 17) 100%)",color:"rgb(72, 39, 25)",topColor:"rgb(130, 2, 2)",downColor:"rgb(163, 17, 17)",name:"Things \ud83d\ude43"},{id:9,type:"gradient",data:"radial-gradient(circle at center 75%, rgb(202, 52, 255) 0%, rgb(48, 44, 255) 50%, rgb(186, 0, 156) 100%)",color:"rgb(96, 29, 221)",topColor:"rgb(202, 52, 255)",downColor:" rgb(186, 0, 156)",name:"Lo-Fi \u2601\ufe0f"},{id:10,type:"gradient",data:"radial-gradient(circle at center 75%, rgb(0, 128, 255) 0%, rgb(159, 26, 255) 100%)",color:"rgb(79, 77, 255)",topColor:"rgb(0, 128, 255)",downColor:"rgb(159, 26, 255) ",name:" Sky \ud83c\udf24"},{id:11,type:"gradient",data:"radial-gradient(circle at center 75%, rgb(241, 97, 78) 0%, rgb(102, 15, 132) 100%)",color:"rgb(178, 75, 119)",topColor:"rgb(241, 97, 78)",downColor:"rgb(102, 15, 132)",name:"Celebration \ud83e\udd73"},{id:12,type:"gradient",data:"radial-gradient(circle at center 75%, rgb(74, 201, 228) 0%, rgb(88, 144, 255) 50%, rgb(140, 145, 255) 100%)",color:"rgb(87, 151, 252)",topColor:"rgb(74, 201, 228)",downColor:" rgb(140, 145, 255)",name:"Care \ud83d\ude0c"},{id:13,type:"gradient",data:"radial-gradient(circle at center 75%, rgb(255, 35, 154) 0%, rgb(255, 140, 33) 100%)",color:"rgb(255, 89, 92)",topColor:"rgb(255, 35, 154) ",downColor:"rgb(255, 140, 33)",name:"Astrology \ud83d\udcab"},{id:14,type:"gradient",data:"radial-gradient(circle at center 75%, rgb(0, 213, 47) 0%, rgb(0, 101, 40) 100%)",color:"rgb(0, 101, 40)",topColor:"rgb(0, 213, 47)",downColor:"rgb(0, 101, 40)",name:"Cottagecore \ud83c\udf44"},{id:15,type:"gradient",data:"radial-gradient(circle at center 75%, rgb(0, 199, 211) 0%, rgb(54, 83, 232) 100%)",color:"rgb(1, 121, 240)",topColor:"rgb(0, 199, 211)",downColor:"rgb(54, 83, 232)",name:"Ocean \ud83d\udc0b"},{id:16,type:"gradient",data:"radial-gradient(circle at center 75%, rgb(255, 13, 158) 0%, rgb(249, 0, 90) 100%)",color:"rgb(249, 0, 90)",topColor:" rgb(255, 13, 158)",downColor:"rgb(249, 0, 90)",name:"Love \ud83d\udc95"},{id:17,type:"gradient",data:"radial-gradient(circle at center 75%, rgb(0, 82, 205) 0%, rgb(0, 161, 230) 50%, rgb(0, 82, 205) 100%)",color:"rgb(0, 82, 205)",topColor:"rgb(0, 82, 205)",downColor:"rgb(0, 82, 205)",name:"Tie-Dye \u270c\ufe0f"},{id:18,type:"color",color:"rgb(96, 96, 96)",name:"Monochrome \ud83d\udda4"},{id:19,type:"gradient",data:"radial-gradient(circle at center 75%, rgb(170, 0, 255) 0%, rgb(0, 128, 255) 100%)",color:"rgb(78, 75, 245)",topColor:"rgb(170, 0, 255)",downColor:"rgb(0, 128, 255)",name:"Default"},{id:20,type:"gradient",data:"radial-gradient(circle at center 75%, rgb(0, 95, 255) 0%, rgb(146, 0, 255) 50%, rgb(255, 46, 25) 100%)",color:"rgb(240, 29, 106)",topColor:"rgb(0, 95, 255)",downColor:"rgb(255, 46, 25)",name:"Berry"},{id:21,type:"gradient",data:"radial-gradient(circle at center 75%, rgb(255, 143, 178) 0%, rgb(167, 151, 255) 50%, rgb(0, 229, 255) 100%)",color:"rgb(255, 124, 168)",topColor:"rgb(255, 143, 178)",downColor:"rgb(0, 229, 255)",name:"Candy"},{id:22,type:"gradient",data:"radial-gradient(circle at center 75%, rgb(251, 69, 222) 0%, rgb(132, 29, 213) 50%, rgb(58, 29, 138) 100%)",color:"rgb(58, 29, 138)",topColor:"rgb(251, 69, 222)",downColor:"rgb(58, 29, 138)",name:"Unicorn"},{id:23,type:"gradient",data:"radial-gradient(circle at center 75%, rgb(42, 127, 227) 0%, rgb(0, 191, 145) 50%, rgb(159, 213, 45) 100%)",color:"rgb(159, 213, 45)",topColor:"rgb(42, 127, 227)",downColor:"rgb(159, 213, 45)",name:"Tropical"},{id:24,type:"gradient",data:"radial-gradient(circle at center 75%, rgb(85, 0, 41) 0%, rgb(170, 50, 50) 50%, rgb(217, 169, 0) 100%)",color:"rgb(217, 169, 0)",topColor:"rgb(85, 0, 41)",downColor:"rgb(217, 169, 0)",name:"Maple"},{id:25,type:"gradient",data:"radial-gradient(circle at center 75%, rgb(242, 92, 84) 0%, rgb(244, 132, 95) 50%, rgb(247, 178, 103) 100%)",color:"rgb(247, 178, 103)",topColor:"rgb(242, 92, 84)",downColor:"rgb(247, 178, 103)",name:"Sushi"},{id:26,type:"gradient",data:"radial-gradient(circle at center 75%, rgb(250, 175, 0) 0%, rgb(255, 46, 46) 50%, rgb(58, 18, 255) 100%)",color:"rgb(58, 18, 255)",topColor:"rgb(250, 175, 0)",downColor:"rgb(58, 18, 255)",name:"Rocket"},{id:27,type:"gradient",data:"radial-gradient(circle at center 75%, rgb(255, 210, 0) 0%, rgb(110, 223, 0) 50%, rgb(0, 223, 187) 100%)",color:"rgb(26, 219, 91)",topColor:"rgb(255, 210, 0)",downColor:"rgb(0, 223, 187)",name:"Citrus"},{id:28,type:"gradient",data:"radial-gradient(circle at center 75%, rgb(255, 98, 91) 0%, rgb(197, 50, 173) 50%, rgb(77, 62, 194) 100%)",color:"rgb(255, 98, 91)",topColor:"rgb(77, 62, 194)",downColor:"rgb(77, 62, 194)",name:"Citrus"},{id:29,type:"gradient",data:"radial-gradient(circle at center 75%, rgb(94, 0, 126) 0%, rgb(51, 18, 144) 50%, rgb(40, 37, 181) 100%)",color:"rgb(40, 37, 181)",topColor:"rgb(94, 0, 126)",downColor:"rgb(40, 37, 181)",name:"Shadow"},{id:30,type:"color",color:"rgb(255, 49, 30)",name:"Rose"},{id:31,type:"color",color:"rgb(167, 151, 255)",name:"Lavender"},{id:32,type:"color",color:"rgb(251, 69, 222)",name:"Tulip"},{id:33,type:"color",color:"rgb(0, 153, 255)",name:"Classic"},{id:34,type:"color",color:"rgb(170, 50, 50)",name:"Apple"},{id:35,type:"color",color:"rgb(242, 92, 84)",name:"Peach"},{id:36,type:"color",color:"rgb(250, 175, 0)",name:"Honey"},{id:37,type:"color",color:"rgb(110, 223, 0)",name:"Kiwi"},{id:38,type:"color",color:"rgb(77, 62, 194)",name:"Ocean"},{id:39,type:"color",color:"rgb(94, 0, 126)",name:"Grape"}],dt=function(){var e=(0,he.Z)((0,me.Z)().mark((function e(t){var a,r,n,s;return(0,me.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.theme,r=t.chatId,e.next=3,ve.Z.put("".concat("","/api/v1/chats/").concat(r,"/theme"),{theme:a},{withCredentials:!0});case 3:return n=e.sent,s=n.data,e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ut=function(e){var t=et(e).mutate;return(0,ke.D)({mutationKey:"useChangeTheme",mutationFn:dt,onSuccess:function(a){var r,n,s,i=null===a||void 0===a||null===(r=a.data)||void 0===r?void 0:r.theme,o=null===a||void 0===a||null===(n=a.data)||void 0===n?void 0:n.name,c=null===a||void 0===a||null===(s=a.data)||void 0===s?void 0:s.user;(0,we.pp)(i,e._id),t({content:"\n         ".concat(o," changed the theme to ").concat(lt[i-1].name,"."),type:"info",chatId:e._id}),qe.Am.success("Theme changed successfully"),_e.W.emit("customize_chat",{userId:c,type:"theme",content:i,chat:e})}})},mt="ChatTheme_wrap__od9MC",ht="ChatTheme_card__HJYeC",pt="ChatTheme_header__39vyM",gt="ChatTheme_exit__JFJho",vt="ChatTheme_content__gl2kv",_t="ChatTheme_themes__Z5DQo",xt="ChatTheme_theme__rjwXZ",ft="ChatTheme_theme_wrap__RGD+6",bt="ChatTheme_theme_con__GhINS",yt="ChatTheme_btns__cqYls";var jt=function(e){var t=e.showChatTheme,a=e.setShowChatTheme,n=e.chatTheme,i=e.chat,o=(0,s.useRef)(),c=(0,s.useState)(n),l=(0,r.Z)(c,2),d=l[0],u=l[1],m=d===n,h=ut(i),p=h.mutate,g=h.isSuccess;return(0,Ue.Z)(o,t,(function(){a(!1)})),(0,s.useEffect)((function(){g&&a(!1)}),[g]),(0,Se.jsx)("div",{className:"".concat(mt," blur"),children:(0,Se.jsxs)(We.Z,{className:ht,innerRef:o,children:[(0,Se.jsxs)("div",{className:pt,children:[(0,Se.jsx)("span",{children:"Themes"}),(0,Se.jsx)("div",{onClick:function(){a(!1)},className:"".concat(gt," small_circle"),children:(0,Se.jsx)("i",{className:"exit_icon"})})]}),(0,Se.jsxs)("div",{className:vt,children:[(0,Se.jsx)("div",{className:"".concat(_t," "),children:lt.map((function(e){return(0,Se.jsx)("div",{className:"".concat(xt," hover2"),style:{background:"".concat(e===d?"var(--bg-third)":"")},onClick:function(){u(e)},children:(0,Se.jsx)("div",{className:ft,children:(0,Se.jsx)("div",{className:bt,style:{backgroundColor:e.color,backgroundImage:"".concat("gradient"===e.type?e.data:"")}})})},e.id)}))}),(0,Se.jsxs)("div",{className:yt,children:[(0,Se.jsx)("button",{className:"gray_btn",onClick:function(){a(!1)},children:"cancel"}),(0,Se.jsx)("button",{disabled:m,className:"btn_blue",onClick:function(){var e;e=d,p({chatId:i._id,theme:e.id})},style:{cursor:"".concat(m?"not-allowed":"pointer"),background:"".concat(m?"var(--bg-third)":"var(--blue-color)"),color:"".concat(m?"#8a8a8a":"#fff")},children:"Save"})]})]})]})})};function kt(e){for(var t="linear-gradient(",a=e.match(/rgb\(\d+, \d+, \d+\)/g),r=0;r<a.length;r++)t+=a[r],r<a.length-1&&(t+=", ");return t+=")"}var Nt=function(e){var t,a,n,i=e.isChatSkelton,o=e.chat,c=e.soketSlice,d=e.chatId,u=e.user,m=e.setOpenInfo,h=e.pView,p=e.openInfo,g=e.chatTheme,v=(0,s.useState)(!1),_=(0,r.Z)(v,2),x=_[0],f=_[1],b=(0,s.useState)(!1),j=(0,r.Z)(b,2),k=j[0],N=j[1],C=(0,s.useState)("add"),w=(0,r.Z)(C,2),Z=w[0],S=w[1],I=(0,s.useRef)();(0,Ue.Z)(I,p,(function(){h||m(!1)}));var E=ot(o).mutate;return(0,Se.jsx)("div",{className:l,ref:I,children:i?(0,Se.jsxs)("div",{className:Q,children:[(0,Se.jsx)(ct.Z,{circle:!0,height:80,width:80}),(0,Se.jsx)(ct.Z,{height:20,width:120})]}):(0,Se.jsxs)(Se.Fragment,{children:[!h&&(0,Se.jsx)("div",{style:{margin:"10px"},className:"small_circle",onClick:function(){m((function(e){return!e}))},children:(0,Se.jsx)("i",{className:"exit_icon"})}),(0,Se.jsxs)("div",{className:Q,children:[(0,Se.jsxs)("div",{className:X,children:[(0,Se.jsx)("img",{src:null===o||void 0===o?void 0:o.photo,alt:""}),c.onlineUsers.find((function(e){var t;return e.id===(null===o||void 0===o||null===(t=o.users[0])||void 0===t?void 0:t._id)}))&&"private"===(null===o||void 0===o?void 0:o.type)&&(0,Se.jsx)("span",{className:y})]}),"group"===(null===o||void 0===o?void 0:o.type)?(0,Se.jsx)("span",{children:null===o||void 0===o?void 0:o.chatName}):(0,Se.jsx)(De.rU,{className:ee,to:"/profile/".concat(null===o||void 0===o||null===(t=o.users[0])||void 0===t?void 0:t.username),children:null===o||void 0===o?void 0:o.chatName})]}),(0,Se.jsxs)("div",{className:te,children:[x&&(0,Se.jsx)(st,{type:Z,setShowCreateGroup:f,showCreateGroup:x,chat:o}),k&&(0,Se.jsx)(jt,{setShowChatTheme:N,showChatTheme:k,chatTheme:g,chat:o}),(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsxs)(Fe,{title:"Chat Members",children:[(null===o||void 0===o||null===(a=o.groupAdmin)||void 0===a?void 0:a._id)===u._id?(0,Se.jsxs)("div",{className:"".concat(ie," hover2"),onClick:function(){S("add"),f(!0)},children:[(0,Se.jsx)("div",{className:"small_circle",children:(0,Se.jsx)("img",{src:"../../../icons/plus.png",alt:"",className:"invert1"})}),"Add member"]}):"",null===o||void 0===o?void 0:o.users.map((function(e){var t,a;return(0,Se.jsxs)("div",{className:ae,children:[(0,Se.jsx)(De.rU,{to:"/profile/".concat(e.username),children:(0,Se.jsx)("img",{src:e.photo,alt:""})}),(0,Se.jsxs)("div",{className:re,style:{flex:"1"},children:[(0,Se.jsx)("span",{children:"".concat(e.first_name," ").concat(e.last_name)}),(0,Se.jsx)("span",{className:ne,children:(null===o||void 0===o||null===(t=o.groupAdmin)||void 0===t?void 0:t._id)===e._id?"Group Admin":"Member"})]}),(null===o||void 0===o||null===(a=o.groupAdmin)||void 0===a?void 0:a._id)===u._id?(0,Se.jsx)("span",{className:se,onClick:function(){var t;t=e._id,E({chatId:d,userId:t})},children:"Remove"}):""]},e._id)}))]}),(null===o||void 0===o||null===(n=o.groupAdmin)||void 0===n?void 0:n._id)===u._id||"private"===(null===o||void 0===o?void 0:o.type)?(0,Se.jsxs)(Fe,{title:"Customize chat",children:["group"===(null===o||void 0===o?void 0:o.type)?(0,Se.jsxs)("div",{className:"".concat(ie," hover2"),onClick:function(){S("rename"),f(!0)},children:[(0,Se.jsx)("div",{className:"small_circle",children:(0,Se.jsx)("img",{src:"../../../icons/plus.png",alt:"",className:"invert1"})}),"Change Name"]}):"",(0,Se.jsxs)("div",{className:"".concat(ie," hover2"),onClick:function(){N(!0)},children:[(0,Se.jsx)("div",{className:"small_circle",children:(0,Se.jsx)("div",{style:{background:"linear-gradient(var(--bg-third), var(--bg-third)) padding-box, ".concat("gradient"===(null===g||void 0===g?void 0:g.type)?kt(null===g||void 0===g?void 0:g.data):"linear-gradient(".concat(null===g||void 0===g?void 0:g.color," , ").concat(null===g||void 0===g?void 0:g.color,")")," border-box")},className:oe})}),"Change theme"]})]}):""]})]})]})})},Ct=a(4050);var wt=function(e){var t=e.chat,a=e.chatId,n=e.setIsTyping,i=e.isTyping,o=e.chatTheme,c=e.scrollToBottom,l=(0,s.useRef)(),d=(0,s.useState)(""),u=(0,r.Z)(d,2),m=u[0],h=u[1],p=(0,s.useState)(null),g=(0,r.Z)(p,2),v=g[0],_=g[1],x=m.length>0,f=et(t),b=f.mutate,y=f.isSuccess,j=function(){x?(b({content:m,type:"text",chatId:a}),_e.W.emit("typing",{room:a,status:!1}),n(!1),h("")):b({content:"like",type:"like",chatId:a})};return(0,s.useEffect)((function(){c()}),[y]),(0,Se.jsxs)("div",{className:V,children:[(0,Se.jsx)(pe.Pz,{color:"gradient"===(null===o||void 0===o?void 0:o.type)?null===o||void 0===o?void 0:o.downColor:null===o||void 0===o?void 0:o.color}),(0,Se.jsx)(pe.WK,{color:"gradient"===(null===o||void 0===o?void 0:o.type)?null===o||void 0===o?void 0:o.downColor:null===o||void 0===o?void 0:o.color}),(0,Se.jsx)("div",{className:D,children:(0,Se.jsx)("textarea",{style:{direction:"".concat((0,Ct.Z)(m)?"rtl":"ltr")},value:m,ref:l,onChange:function(e){i||(n(!0),_e.W.emit("typing",{room:a,status:!0})),clearTimeout(v),_(setTimeout((function(){_e.W.emit("typing",{room:a,status:!1}),n(!1)}),3e3)),h(e.target.value)},className:G,type:"text",placeholder:"Aa",onKeyDown:function(e){13===e.keyCode&&!1===e.shiftKey&&(e.preventDefault(),j())}})}),(0,Se.jsx)("div",{className:T,onClick:j,children:x?(0,Se.jsx)(pe.vw,{color:"gradient"===(null===o||void 0===o?void 0:o.type)?null===o||void 0===o?void 0:o.downColor:null===o||void 0===o?void 0:o.color}):(0,Se.jsx)(pe.mN,{color:"gradient"===(null===o||void 0===o?void 0:o.type)?null===o||void 0===o?void 0:o.downColor:null===o||void 0===o?void 0:o.color})})]})};var Zt=function(e){var t,a,n,i,c,l,d,u,m=e.chatId,h=e.soketSlice,p=e.user,g=e.pView,v=e.setOpenInfo,_=e.openInfo,x=(0,s.useRef)(),k=(0,je.YD)(),N=k.ref,C=k.inView,w=(0,je.YD)(),Z=w.ref,S=w.inView,I=(0,ue.s0)(),E=(0,s.useState)({room:"",status:!1}),V=(0,r.Z)(E,2),D=V[0],G=V[1],T=function(){var e;null===(e=x.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},q=function(){var e=(0,he.Z)((0,me.Z)().mark((function e(t){var a,r,n,s;return(0,me.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.pageParam,r=void 0===a?1:a,e.next=3,ve.Z.get("".concat("","/api/v1/messages/").concat(m,"?sort=-createdAt&limit=100&page=").concat(r),{withCredentials:!0});case 3:return n=e.sent,s=n.data,e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=(0,ge.N)({queryKey:["getMessages",m],queryFn:q,getNextPageParam:function(e,t){return e.length<100?void 0:t.length+1},refetchOnWindowFocus:!1,refetchOnMount:!1,staleTime:1/0,onError:function(e){var t,a;qe.Am.error(null===e||void 0===e||null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message),I("/messages",{replace:!0})}}),Q=J.isLoading,X=J.data,ee=J.isSuccess,te=J.fetchNextPage,ae=J.isFetchingNextPage,re=J.hasNextPage,ne=null===X||void 0===X||null===(t=X.pages)||void 0===t?void 0:t.map((function(e){return e.data.messages})).reduce((function(e,t){return e.concat(t)}),[]),se=null===X||void 0===X||null===(a=X.pages[0])||void 0===a||null===(n=a.data)||void 0===n?void 0:n.chat,ie=Q&&!ee&&!X&&!(null!==X&&void 0!==X&&X.data),oe=lt[(null===X||void 0===X||null===(i=X.pages[0])||void 0===i||null===(c=i.data)||void 0===c||null===(l=c.chat)||void 0===l?void 0:l.theme)-1],le=function(e){var t=(0,Ne.I0)();return(0,ke.D)({mutationKey:"useSeenMessage",mutationFn:Ze,onSuccess:function(a){var r,n,s=null===a||void 0===a||null===(r=a.data)||void 0===r?void 0:r.message,i=null===a||void 0===a||null===(n=a.data)||void 0===n?void 0:n.unseenMessages;(0,we.Ov)(s,e),t((0,Ce.Zp)({unseenMessages:i})),_e.W.emit("seen",{message:s,chat:e})}})}(null===X||void 0===X||null===(d=X.pages[0])||void 0===d||null===(u=d.data)||void 0===u?void 0:u.chat).mutate;(0,s.useEffect)((function(){T()}),[m]),(0,s.useEffect)((function(){_e.W.emit("join_room",m),_e.W.on("typing",(function(e){var t=e.room,a=e.status;G({room:t,status:a})}))}),[m]),(0,s.useEffect)((function(){var e,t,a;C&&"unseen"===(null===se||void 0===se||null===(e=se.latestMessage)||void 0===e?void 0:e.seen)&&(null===se||void 0===se?void 0:se._id)===m&&(null===se||void 0===se||null===(t=se.latestMessage)||void 0===t?void 0:t.sender._id)!==p._id&&le({messageId:null===se||void 0===se||null===(a=se.latestMessage)||void 0===a?void 0:a._id})}),[C,X]),(0,s.useEffect)((function(){S&&te()}),[S]);var xe=(0,Se.jsxs)("div",{style:{padding:"10px"},children:[(0,Se.jsx)("div",{className:"".concat(P),children:(0,Se.jsx)(ct.Z,{height:30,width:170,style:{transform:"translateY(4px)",borderRadius:"20px"}})}),(0,Se.jsx)("div",{className:"".concat(P," ").concat(O),children:(0,Se.jsx)(ct.Z,{height:30,width:150,style:{transform:"translateY(4px)",borderRadius:"20px"}})}),(0,Se.jsx)("div",{className:"".concat(P," ").concat(O),children:(0,Se.jsx)(ct.Z,{height:30,width:100,style:{transform:"translateY(4px)",borderRadius:"20px"}})}),(0,Se.jsx)("div",{className:"".concat(P),children:(0,Se.jsx)(ct.Z,{height:30,width:100,style:{transform:"translateY(4px)",borderRadius:"20px"}})})]});return(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsxs)("div",{className:o,children:[(0,Se.jsxs)("div",{className:M,children:[!g&&(0,Se.jsx)(De.rU,{to:"/messages",className:"".concat(ce," ").concat(de),children:(0,Se.jsx)(pe.$T,{})}),(0,Se.jsxs)("div",{className:f,children:[ie?"":(0,Se.jsxs)("div",{className:b,children:[(0,Se.jsx)("img",{src:null===se||void 0===se?void 0:se.photo,alt:""}),h.onlineUsers.find((function(e){var t;return e.id===(null===se||void 0===se||null===(t=se.users[0])||void 0===t?void 0:t._id)}))&&"private"===(null===se||void 0===se?void 0:se.type)&&(0,Se.jsx)("span",{className:y})]}),(0,Se.jsx)("div",{className:j,children:ie?"":(0,Se.jsx)("span",{children:null===se||void 0===se?void 0:se.chatName})})]}),(0,Se.jsxs)("div",{style:{display:"flex",gap:"5px"},children:[(0,Se.jsx)("div",{className:"hover2 small_circle",children:(0,Se.jsx)(pe.LP,{color:"gradient"===(null===oe||void 0===oe?void 0:oe.type)?null===oe||void 0===oe?void 0:oe.topColor:null===oe||void 0===oe?void 0:oe.color})}),(0,Se.jsx)("div",{className:"hover2 small_circle",onClick:function(){v((function(e){return!e}))},children:(0,Se.jsx)(pe.kI,{color:"gradient"===(null===oe||void 0===oe?void 0:oe.type)?null===oe||void 0===oe?void 0:oe.topColor:null===oe||void 0===oe?void 0:oe.color})})]})]}),(0,Se.jsxs)("div",{className:A,children:[(0,Se.jsx)("div",{ref:x}),D.status&&D.room===m?(0,Se.jsxs)("div",{className:"".concat(P," ").concat(O),children:[(0,Se.jsx)("div",{className:H,children:(0,Se.jsx)("img",{src:null===se||void 0===se?void 0:se.photo,alt:""})}),(0,Se.jsx)(be.Z,{style:{transform:"translateY(2px)",height:35},animationData:ye,loop:!0,play:!0})]}):"",ie?xe:(0,Se.jsxs)(Se.Fragment,{children:[null===ne||void 0===ne?void 0:ne.map((function(e,t){return(0,Se.jsx)("div",{ref:0===t&&Ee(e,p)?N:null,children:"text"===e.type||"like"===e.type?(0,Se.jsxs)("div",{className:"".concat(P," ").concat(Ee(e,p)?O:""),children:[Ee(e,p)&&(0,Se.jsx)("div",{className:H,children:Me(e,ne,t)||Ve(e,ne,t)?(0,Se.jsx)("img",{src:e.sender.photo,alt:""}):""}),!Ee(e,p)&&(Me(e,ne,t)||Ve(e,ne,t))&&(0,Se.jsx)("div",{className:R,children:(0,Se.jsx)(fe(),{fromNow:!0,interval:30,children:e.updatedAt})}),"like"===e.type?(0,Se.jsx)(pe.mN,{height:"60",width:"60",style:{marginTop:"10px"},color:null===oe||void 0===oe?void 0:oe.color}):(0,Se.jsx)("div",{style:{backgroundColor:Ee(e,p)?"":null===oe||void 0===oe?void 0:oe.color,backgroundImage:Ee(e,p)||"gradient"!==(null===oe||void 0===oe?void 0:oe.type)?"":kt(null===oe||void 0===oe?void 0:oe.data)},className:"".concat(B," ").concat(Ee(e,p)?K:""," ").concat(Ee(e,p)&&Ae(e,ne,t)?W:""," ").concat(Ee(e,p)&&Me(e,ne,t)?z:""," ").concat(!Ee(e,p)&&Ae(e,ne,t)?U:""," ").concat(!Ee(e,p)&&Me(e,ne,t)?L:""," ").concat(Ve(e,ne,t)?Y:""),children:e.content}),!Ee(e,p)&&(0,Se.jsx)("div",{className:F,children:0===t?(0,Se.jsx)(Ie,{chat:se,user:p}):""}),Ee(e,p)&&(Me(e,ne,t)||Ve(e,ne,t))&&(0,Se.jsx)("div",{className:R,children:(0,Se.jsx)(fe(),{fromNow:!0,interval:30,children:e.updatedAt})})]},e._id):"info"===e.type?(0,Se.jsx)("div",{className:$,children:e.content}):""},e._id)})),(0,Se.jsx)("div",{ref:Z,disabled:!re||ae,style:{marginBottom:"20px",textAlign:"center",color:"var(--color-secondary)"},children:ae?xe:re?"Loading old messages ...":"No more messages"})]})]}),(0,Se.jsx)(wt,{chat:se,chatId:m,setIsTyping:G,isTyping:D,chatTheme:oe,scrollToBottom:T})]}),_&&(0,Se.jsx)(Nt,{isChatSkelton:ie,chat:se,soketSlice:h,chatId:m,user:p,setOpenInfo:v,pView:g,openInfo:_,chatTheme:oe})]})},St=a(5439),It=a(3970),Et=a(9747);var Mt=function(e){var t=e.color,a=e.showSearchMenu,n=e.setShowSearchMenu,i=(0,ue.s0)(),o=(0,s.useState)(!0),c=(0,r.Z)(o,2),l=c[0],d=c[1],u=(0,s.useState)(!0),m=(0,r.Z)(u,2),h=m[0],p=m[1],g=(0,s.useState)(""),v=(0,r.Z)(g,2),_=v[0],x=v[1],f=(0,s.useState)(_),b=(0,r.Z)(f,2),y=b[0],j=b[1],k=(0,s.useRef)(null),N=(0,s.useRef)(null),C=(0,He.R)(),w=C.mutate,Z=C.data,S=C.isLoading,I=C.isSuccess,E=(0,Et.C)(),M=E.mutate,A=E.data,V=(E.isLoading,E.isSuccess);return(0,Ue.Z)(k,a,(function(){n(!1)})),(0,s.useEffect)((function(){N.current.focus()}),[]),(0,s.useEffect)((function(){"success"===(null===A||void 0===A?void 0:A.status)&&i("/messages/".concat(A.data.chat._id))}),[V]),(0,s.useEffect)((function(){var e=setTimeout((function(){return x(y)}),1e3);return function(){return clearTimeout(e)}}),[y]),(0,s.useEffect)((function(){_.trim().length>0?(w({term:_}),p(!1)):p(!0)}),[_]),(0,Se.jsxs)("div",{className:"".concat(Ye.header_left," ").concat(Ye.search_area),ref:k,children:[(0,Se.jsxs)("div",{className:Ye.search_wrap,children:[(0,Se.jsx)("div",{className:"circle hover1",onClick:function(){n(!1)},children:(0,Se.jsx)(pe.z1,{color:t})}),(0,Se.jsxs)("div",{className:Ye.search,onClick:function(){N.current.focus()},children:[l&&(0,Se.jsx)("div",{children:(0,Se.jsx)(pe.HN,{color:t})}),(0,Se.jsx)("input",{className:Ye.input,type:"text",placeholder:"Search Messenger",ref:N,onChange:function(e){return j(e.target.value)},value:y,onFocus:function(){d(!1)},onBlur:function(){d(!0)}})]})]}),(0,Se.jsx)("div",{className:"scrollbar",style:{height:"90%"},children:(0,Se.jsx)("div",{className:"".concat(Ye.search_results," scrollbar"),children:!S&&I&&!h&&(null===Z||void 0===Z?void 0:Z.data.results.length)>0&&_.trim().length>0?null===Z||void 0===Z?void 0:Z.data.results.map((function(e){return(0,Se.jsx)("div",{to:"/messages/".concat(e._id),className:"".concat(Ye.search_item," hover2"),onClick:function(){var t;t=e._id,M({user:t})},children:(0,Se.jsxs)("div",{className:"".concat(Ye.search_result),children:[(0,Se.jsx)("div",{children:(0,Se.jsx)("img",{className:Ye.search_result_img,src:e.photo,alt:""})}),(0,Se.jsxs)("span",{children:[e.first_name," ",e.last_name]})]})},e._id)})):_?(0,Se.jsx)("p",{style:{padding:"10px"},children:"No Search Results"}):(0,Se.jsx)("p",{style:{padding:"10px"},children:"Type something to search"})})})]})};var At=function(e){var t=e.soketSlice,a=e.user,n=e.chatId,i=(0,s.useRef)(),o=(0,s.useRef)(),l=(0,ue.s0)(),d=(0,s.useState)(!0),b=(0,r.Z)(d,2),M=b[0],A=b[1],V=(0,s.useState)(!1),D=(0,r.Z)(V,2),G=D[0],T=D[1],P=(0,s.useState)(!1),R=(0,r.Z)(P,2),F=R[0],O=R[1],B=(0,s.useState)(!1),U=(0,r.Z)(B,2),L=U[0],K=U[1],W="#65676b",z=(0,St.a)({queryKey:["getChats"],queryFn:function(){var e=(0,he.Z)((0,me.Z)().mark((function e(){var t,a;return(0,me.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve.Z.get("".concat("","/api/v1/chats?sort=-updatedAt"),{withCredentials:!0});case 2:return t=e.sent,a=t.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),refetchOnWindowFocus:!1,refetchOnMount:!1,staleTime:1/0}),Y=z.isLoading,$=z.data,H=z.isSuccess;(0,Ue.Z)(o,L,(function(){K(!1)}));var q=(0,Et.C)(),J=q.mutate,Q=q.data,X=(q.isLoading,q.isSuccess);return(0,s.useEffect)((function(){"success"===(null===Q||void 0===Q?void 0:Q.status)&&l("/messages/".concat(Q.data.chat._id))}),[X]),(0,Se.jsxs)("div",{className:c,children:[(0,Se.jsxs)("div",{className:u,children:[(0,Se.jsxs)("div",{className:m,children:[(0,Se.jsx)("h2",{children:"Chats"}),(0,Se.jsxs)("div",{className:N,children:[(0,Se.jsx)("div",{onClick:function(){K(!0)},className:h,children:(0,Se.jsx)(pe.bb,{})}),L&&(0,Se.jsx)(We.Z,{innerRef:o,className:k,children:(0,Se.jsx)("ul",{children:(0,Se.jsxs)("li",{className:"hover1",onClick:function(){O(!0)},children:[(0,Se.jsx)("i",{className:"create_icon"}),(0,Se.jsxs)("div",{className:C,children:[(0,Se.jsx)("span",{children:"Create Group"}),(0,Se.jsx)("span",{className:w,children:"Create Group to chat with your contacts"})]})]})})})]}),F&&(0,Se.jsx)(st,{type:"create",setShowCreateGroup:O,showCreateGroup:F})]}),(0,Se.jsxs)("div",{className:p,onClick:function(){i.current.focus(),T(!0)},children:[M&&(0,Se.jsx)(pe.HN,{color:W}),(0,Se.jsx)("input",{ref:i,type:"text",name:"search",placeholder:"Search Messenger",className:g,onFocus:function(){A(!1),T(!0)},onBlur:function(){return A(!0)}})]})]}),G&&(0,Se.jsx)(Mt,{color:W,showSearchMenu:G,setShowSearchMenu:T}),(0,Se.jsx)("div",{className:Z,children:(0,Se.jsx)(It.ZP,{children:(0,Se.jsx)("div",{className:S,children:t.onlineUsers.length>0&&t.onlineUsers.map((function(e){return(0,Se.jsxs)("div",{className:I,onClick:function(){var t;t=e.id,J({user:t})},children:[(0,Se.jsxs)("div",{className:E,children:[(0,Se.jsx)("img",{src:e.photo,alt:""}),(0,Se.jsx)("span",{className:y})]}),e.first_name]},e.id)}))})})}),(0,Se.jsx)("div",{className:"scrollbar",style:{maxHeight:"90%"},children:(0,Se.jsx)("div",{className:v,children:!Y&&H&&$?null===$||void 0===$?void 0:$.data.chats.map((function(e){return(0,Se.jsxs)(De.rU,{to:"/messages/".concat(e._id),className:"".concat(_," hover2 ").concat(n===e._id?x:""," "),children:[(0,Se.jsxs)("div",{className:f,children:[(0,Se.jsx)("img",{src:e.photo,alt:""}),t.onlineUsers.find((function(t){var a;return t.id===(null===(a=e.users[0])||void 0===a?void 0:a._id)}))&&"private"===e.type&&(0,Se.jsx)("span",{className:y})]}),(0,Se.jsxs)("div",{className:j,children:[(0,Se.jsx)("span",{children:e.chatName}),(null===e||void 0===e?void 0:e.latestMessage)&&(0,Se.jsxs)("p",{style:{color:"".concat("unseen"===(null===e||void 0===e?void 0:e.latestMessage.seen)&&a._id!==(null===e||void 0===e?void 0:e.latestMessage.sender._id)?"#0096ff":"")},children:[(r="".concat(a._id===(null===e||void 0===e?void 0:e.latestMessage.sender._id)?"You :":"group"===(null===e||void 0===e?void 0:e.type)?"".concat(null===e||void 0===e?void 0:e.latestMessage.sender.first_name," : "):""," ").concat(null===e||void 0===e?void 0:e.latestMessage.content),r.length>30?r.slice(0,30)+"..":r)," . ",(0,Se.jsx)(fe(),{fromNow:!0,interval:30,children:e.latestMessage.updatedAt})]})]}),(0,Se.jsx)(Ie,{chat:e,user:a})]},e._id);var r})):(0,Se.jsxs)(Se.Fragment,{children:[(0,Se.jsx)(ct.Z,{className:_,height:76,style:{transform:"translateY(4px)"}}),(0,Se.jsx)(ct.Z,{className:_,height:76,style:{transform:"translateY(4px)"}}),(0,Se.jsx)(ct.Z,{className:_,height:76,style:{transform:"translateY(4px)"}})]})})})]})},Vt=a(4805),Dt=JSON.parse('{"v":"4.6.6","fr":25,"ip":0,"op":50,"w":18,"h":18,"nm":"2.0 A-\u9996\u9875-inline\u64ad\u653e","ddd":0,"assets":[],"layers":[{"ddd":0,"ind":1,"ty":4,"nm":"\u5f62\u72b6\u56fe\u5c42 1","ks":{"o":{"a":0,"k":100},"r":{"a":0,"k":0},"p":{"a":0,"k":[9,9,0]},"a":{"a":0,"k":[0,0,0]},"s":{"a":0,"k":[3.0405405405405403,3.0405405405405403,100]}},"ao":0,"shapes":[{"d":1,"ty":"el","s":{"a":1,"k":[{"i":{"x":[0.667,0.667],"y":[1,1]},"o":{"x":[0.333,0.333],"y":[0,0]},"n":["0p667_1_0p333_0","0p667_1_0p333_0"],"t":2,"s":[0,0],"e":[29,29]},{"i":{"x":[0.667,0.667],"y":[1,1]},"o":{"x":[0.333,0.333],"y":[0,0]},"n":["0p667_1_0p333_0","0p667_1_0p333_0"],"t":7,"s":[29,29],"e":[0,0]},{"t":16}]},"p":{"a":1,"k":[{"i":{"x":0.52,"y":1},"o":{"x":0.6,"y":0},"n":"0p52_1_0p6_0","t":1,"s":[0,0],"e":[0,189],"to":[0,31.5],"ti":[0,-40]},{"i":{"x":0.38,"y":1},"o":{"x":0.333,"y":0},"n":"0p38_1_0p333_0","t":6,"s":[0,189],"e":[0,240],"to":[0,40],"ti":[0,-8.5]},{"t":15}]},"nm":"\u692d\u5706\u8def\u5f84 1","mn":"ADBE Vector Shape - Ellipse"},{"ty":"fl","c":{"a":0,"k":[0.2901960784313726,0.5647058823529412,0.8862745098039215,1]},"o":{"a":0,"k":100},"r":1,"nm":"\u586b\u5145 1","mn":"ADBE Vector Graphic - Fill"},{"ty":"rp","c":{"a":0,"k":8,"ix":1},"o":{"a":0,"k":0,"ix":2},"m":1,"ix":3,"tr":{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":45,"ix":4},"so":{"a":0,"k":100,"ix":5},"eo":{"a":0,"k":100,"ix":6},"nm":"\u53d8\u6362"},"nm":"\u4e2d\u7ee7\u5668 1","mn":"ADBE Vector Filter - Repeater"}],"ip":0,"op":250,"st":0,"bm":0,"sr":1},{"ddd":0,"ind":2,"ty":4,"nm":"Explosion Vol.1 08 / 1","cl":"1","ks":{"o":{"a":0,"k":100},"r":{"a":0,"k":0},"p":{"a":0,"k":[9,9,0]},"a":{"a":0,"k":[-120.395,32.605,0]},"s":{"a":1,"k":[{"i":{"x":[0,0,0.667],"y":[1.002,1.002,0.667]},"o":{"x":[1,1,0.333],"y":[0,0,0.333]},"n":["0_1p002_1_0","0_1p002_1_0","0p667_0p667_0p333_0p333"],"t":2,"s":[0,0,100],"e":[2.9189189189189184,2.9189189189189184,100]},{"t":14}]}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[367.211,367.211]},"p":{"a":0,"k":[0,0]},"nm":"\u692d\u5706\u8def\u5f84 1","mn":"ADBE Vector Shape - Ellipse"},{"ty":"st","c":{"a":0,"k":[0.2901960784313726,0.5647058823529412,0.8862745098039215,1]},"o":{"a":0,"k":100},"w":{"a":1,"k":[{"i":{"x":[0.297],"y":[1]},"o":{"x":[0.588],"y":[0]},"n":["0p297_1_0p588_0"],"t":2,"s":[240],"e":[0]},{"t":14}]},"lc":1,"lj":1,"ml":4,"nm":"\u63cf\u8fb9 1","mn":"ADBE Vector Graphic - Stroke"},{"ty":"tr","p":{"a":0,"k":[-120.395,32.605],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"\u53d8\u6362"}],"nm":"Ellipse 1","np":3,"cix":2,"ix":1,"mn":"ADBE Vector Group"}],"ip":0,"op":30,"st":0,"bm":0,"sr":1},{"ddd":0,"ind":3,"ty":4,"nm":"\u201c\u559c\u6b22\u201d\u8f6e\u5ed3","ks":{"o":{"a":0,"k":100},"r":{"a":0,"k":0,"x":"var $bm_rt;\\n$bm_rt = transform.rotation;"},"p":{"a":0,"k":[9,9,0],"x":"var $bm_rt;\\n$bm_rt = transform.position;"},"a":{"a":0,"k":[25,22.5,0]},"s":{"a":1,"k":[{"i":{"x":[0.48,0.48,0.667],"y":[1,1,0.667]},"o":{"x":[0.333,0.333,0.167],"y":[0.115,0.115,0.167]},"n":["0p48_1_0p333_0p115","0p48_1_0p333_0p115","0p667_0p667_0p167_0p167"],"t":0,"s":[12.162162162162161,12.162162162162161,100],"e":[7.2972972972972965,7.2972972972972965,100]},{"i":{"x":[0.516,0.516,0.667],"y":[1,1,0.667]},"o":{"x":[0.264,0.264,0.333],"y":[0,0,0.333]},"n":["0p516_1_0p264_0","0p516_1_0p264_0","0p667_0p667_0p333_0p333"],"t":2,"s":[7.2972972972972965,7.2972972972972965,100],"e":[15.81081081081081,15.81081081081081,100]},{"i":{"x":[0.605,0.605,0.667],"y":[1.005,1.005,0.667]},"o":{"x":[0.373,0.373,0.333],"y":[0,0,0.333]},"n":["0p605_1p005_0p373_0","0p605_1p005_0p373_0","0p667_0p667_0p333_0p333"],"t":7,"s":[15.81081081081081,15.81081081081081,100],"e":[12.162162162162161,12.162162162162161,100]},{"i":{"x":[0.663,0.663,0.833],"y":[0.978,0.978,0.833]},"o":{"x":[0.32,0.32,0.167],"y":[0,0,0.167]},"n":["0p663_0p978_0p32_0","0p663_0p978_0p32_0","0p833_0p833_0p167_0p167"],"t":11,"s":[12.162162162162161,12.162162162162161,100],"e":[12.77027027027027,12.77027027027027,100]},{"i":{"x":[0.64,0.64,0.833],"y":[0.973,0.973,0.833]},"o":{"x":[0.29,0.29,0.167],"y":[0.002,0.002,0.167]},"n":["0p64_0p973_0p29_0p002","0p64_0p973_0p29_0p002","0p833_0p833_0p167_0p167"],"t":14,"s":[12.77027027027027,12.77027027027027,100],"e":[12.162162162162161,12.162162162162161,100]},{"t":19}]}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[7.401,0],[2.068,-3.674],[4.874,0],[0,-6.245],[-0.912,-0.537],[-0.234,0],[-0.209,0.124],[0,14.79]],"o":[[-4.875,0],[-2.067,-3.674],[-7.402,0],[0,14.79],[0.209,0.124],[0.234,0],[0.912,-0.537],[0,-6.245]],"v":[[11.176,-20.5],[0,-14.302],[-11.175,-20.5],[-23,-7.795],[-0.676,20.315],[0,20.5],[0.676,20.315],[23,-7.795]],"c":true}},"nm":"\u8def\u5f84 1","mn":"ADBE Vector Shape - Group"},{"ty":"fl","c":{"a":0,"k":[0.2901960784313726,0.5647058823529412,0.8862745098039215,1]},"o":{"a":0,"k":100},"r":1,"nm":"\u586b\u5145 1","mn":"ADBE Vector Graphic - Fill"},{"ty":"st","c":{"a":0,"k":[0.2901960784313726,0.5647058823529412,0.8862745098039215,1]},"o":{"a":0,"k":100},"w":{"a":0,"k":3.6},"lc":2,"lj":2,"nm":"\u63cf\u8fb9 1","mn":"ADBE Vector Graphic - Stroke"},{"ty":"tr","p":{"a":0,"k":[25,22.5],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"\u53d8\u6362"}],"nm":"\u7ec4 1","np":3,"cix":2,"ix":1,"mn":"ADBE Vector Group"}],"ip":0,"op":250,"st":0,"bm":0,"sr":1}]}'),Gt=a(3968);var Tt=function(){var e=(0,Ne.v9)((function(e){return(0,n.Z)({},e)})),t=e.soketSlice,a=e.user,o=(0,Ne.I0)(),c=a.userinfo,l=(0,ue.UO)().chatId,u=(0,Vt.useMediaQuery)({query:"(min-width: 850px)"})||!l,m=(0,s.useState)(u),h=(0,r.Z)(m,2),p=h[0],g=h[1];return(0,s.useEffect)((function(){g(u)}),[u]),(0,s.useEffect)((function(){o((0,Gt.zU)(l))}),[l]),(0,s.useEffect)((function(){var e=function(e){var t=document.documentElement,a=window.visualViewport.height;t.style.setProperty("--app-height","".concat(a,"px"))};return window.addEventListener("resize",e),e(),function(){window.addEventListener("resize",e)}}),[]),(0,Se.jsxs)("div",{className:"".concat(i," ").concat(p?"":le," ").concat(l?"":le),children:[u&&(0,Se.jsx)(At,{chatId:l,soketSlice:t,user:c}),l?(0,Se.jsx)(Zt,{pView:u,chatId:l,soketSlice:t,user:c,setOpenInfo:g,openInfo:p}):(0,Se.jsxs)("div",{className:d,children:[(0,Se.jsx)(be.Z,{style:{transform:"translateY(2px)",height:250},animationData:Dt,loop:!0,play:!0}),(0,Se.jsx)("h2",{children:"Start a conversation"})]})]})}},7858:function(e,t,a){a.d(t,{N:function(){return x}});var r=a(3734),n=a(4925),s=a(1413),i=a(5671),o=a(3144),c=a(1752),l=a(1120),d=a(136),u=a(7277),m=a(1135),h=a(2806),p=["pageParam"],g=["pageParam"],v=function(e){(0,d.Z)(a,e);var t=(0,u.Z)(a);function a(e,r){return(0,i.Z)(this,a),t.call(this,e,r)}return(0,o.Z)(a,[{key:"bindMethods",value:function(){(0,c.Z)((0,l.Z)(a.prototype),"bindMethods",this).call(this),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}},{key:"setOptions",value:function(e,t){(0,c.Z)((0,l.Z)(a.prototype),"setOptions",this).call(this,(0,s.Z)((0,s.Z)({},e),{},{behavior:(0,h.Gm)()}),t)}},{key:"getOptimisticResult",value:function(e){return e.behavior=(0,h.Gm)(),(0,c.Z)((0,l.Z)(a.prototype),"getOptimisticResult",this).call(this,e)}},{key:"fetchNextPage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.pageParam,a=(0,n.Z)(e,p);return this.fetch((0,s.Z)((0,s.Z)({},a),{},{meta:{fetchMore:{direction:"forward",pageParam:t}}}))}},{key:"fetchPreviousPage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.pageParam,a=(0,n.Z)(e,g);return this.fetch((0,s.Z)((0,s.Z)({},a),{},{meta:{fetchMore:{direction:"backward",pageParam:t}}}))}},{key:"createResult",value:function(e,t){var r,n,i,o,d,u,m=e.state,p=(0,c.Z)((0,l.Z)(a.prototype),"createResult",this).call(this,e,t),g=p.isFetching,v=p.isRefetching,_=g&&"forward"===(null==(r=m.fetchMeta)||null==(n=r.fetchMore)?void 0:n.direction),x=g&&"backward"===(null==(i=m.fetchMeta)||null==(o=i.fetchMore)?void 0:o.direction);return(0,s.Z)((0,s.Z)({},p),{},{fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:(0,h.Qy)(t,null==(d=m.data)?void 0:d.pages),hasPreviousPage:(0,h.ZF)(t,null==(u=m.data)?void 0:u.pages),isFetchingNextPage:_,isFetchingPreviousPage:x,isRefetching:v&&!_&&!x})}}]),a}(m.z),_=a(8560);function x(e,t,a){var n=(0,r._v)(e,t,a);return(0,_.r)(n,v)}},9348:function(e,t,a){a.d(t,{YD:function(){return f}});var r=a(885),n=a(5671),s=a(3144),i=a(136),o=a(7277),c=a(2791);function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},l.apply(this,arguments)}var d=new Map,u=new WeakMap,m=0,h=void 0;function p(e){return Object.keys(e).sort().filter((function(t){return void 0!==e[t]})).map((function(t){return"".concat(t,"_").concat("root"===t?(a=e.root)?(u.has(a)||(m+=1,u.set(a,m.toString())),u.get(a)):"0":e[t]);var a})).toString()}function g(e){var t=p(e),a=d.get(t);if(!a){var r,n=new Map,s=new IntersectionObserver((function(t){t.forEach((function(t){var a,s=t.isIntersecting&&r.some((function(e){return t.intersectionRatio>=e}));e.trackVisibility&&"undefined"===typeof t.isVisible&&(t.isVisible=s),null==(a=n.get(t.target))||a.forEach((function(e){e(s,t)}))}))}),e);r=s.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),a={id:t,observer:s,elements:n},d.set(t,a)}return a}function v(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:h;if("undefined"===typeof window.IntersectionObserver&&void 0!==r){var n=e.getBoundingClientRect();return t(r,{isIntersecting:r,target:e,intersectionRatio:"number"===typeof a.threshold?a.threshold:0,time:0,boundingClientRect:n,intersectionRect:n,rootBounds:n}),function(){}}var s=g(a),i=s.id,o=s.observer,c=s.elements,l=c.get(e)||[];return c.has(e)||c.set(e,l),l.push(t),o.observe(e),function(){l.splice(l.indexOf(t),1),0===l.length&&(c.delete(e),o.unobserve(e)),0===c.size&&(o.disconnect(),d.delete(i))}}var _=["children","as","triggerOnce","threshold","root","rootMargin","onChange","skip","trackVisibility","delay","initialInView","fallbackInView"];function x(e){return"function"!==typeof e.children}c.Component;function f(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.threshold,n=t.delay,s=t.trackVisibility,i=t.rootMargin,o=t.root,l=t.triggerOnce,d=t.skip,u=t.initialInView,m=t.fallbackInView,h=t.onChange,p=c.useState(null),g=(0,r.Z)(p,2),_=g[0],x=g[1],f=c.useRef(),b=c.useState({inView:!!u,entry:void 0}),y=(0,r.Z)(b,2),j=y[0],k=y[1];f.current=h,c.useEffect((function(){var e;if(!d&&_)return e=v(_,(function(t,a){k({inView:t,entry:a}),f.current&&f.current(t,a),a.isIntersecting&&l&&e&&(e(),e=void 0)}),{root:o,rootMargin:i,threshold:a,trackVisibility:s,delay:n},m),function(){e&&e()}}),[Array.isArray(a)?a.toString():a,_,o,i,l,d,s,m,n]);var N=null==(e=j.entry)?void 0:e.target;c.useEffect((function(){_||!N||l||d||k({inView:!!u,entry:void 0})}),[_,N,l,d,u]);var C=[x,j.inView,j.entry];return C.ref=C[0],C.inView=C[1],C.entry=C[2],C}}}]);
//# sourceMappingURL=381.395a8acf.chunk.js.map